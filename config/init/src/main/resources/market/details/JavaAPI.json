{
	"title":"Api JAVA",
	"technologies":"Java,JAR",
	"description":"A Java API for communication with the platform. It includes several clients for MQTT and MQTTS connections",
	"detailedDescription":"##** Sofia4Cities Java Client Library**\n============================\n\n#### Compile and use the library:\n\nTo use this library you need to:\n\n- Compile the platform, this generates on your local Maven Repository: \\com\\indracompany\\sofia2\\sofia2-ssap\\5.2.0-rc1\\sofia2-ssap-5.2.0-rc1.jar\n- Compile the client library, this generates \\com\\indracompany\\sofia2\\sofia2-java-clients\\5.2.0-rc1\\sofia2-java-clients-5.2.0-rc1.jar\n- Add following dependency to your project:\n\n\n```\n <dependency>\n \t<groupId>com.indracompany.sofia2</groupId>\n \t<artifactId>sofia2-java-clients</artifactId>\n \t<version>${sofia2.version}</version>\n </dependency>\n```\n\n- list text hereImport com.indracompany.sofia2.client.MQTTClient in your java class.\n\n#### **MQTTS Client API**\n\nMQTTClient API allows your application to connect and send data to the IoT Broker, using MQTT as the transport protocol.\n\n#### **MQTTS (SSL) **\n\nThis client allows you to configure MQTT over SSL. To create a secure connection, follow these steps:\n\n- Create a MQTTSecureConfiguration object specifying the path to your Key Store (.jks), and its password. If one of them is not specified, then default Key Store and password will be used.\n\n- Create a MQTTClient with the Broker URL and the MQTTSecureConfiguration object.\n\n![](https://sofia2-devops.westeurope.cloudapp.azure.com/gitlab/sofia2-projects/sofia2-s4c/raw/develop/client-libraries/java/exampleSSL.png \"Example SSL\")\n\n#### **MQTT not secure** \n\nIf you don't want to use a secure connection, you may use standard MQTT protocol:\n\n![](https://sofia2-devops.westeurope.cloudapp.azure.com/gitlab/sofia2-projects/sofia2-s4c/raw/develop/client-libraries/java/exampleNotSSL.png \"example Not SSL\")\n\n#### **Connect the client**\n\n- To connect client to Broker, you need to call method \"connect()\" with aguments: token, device identification, device instance identification, and timeout for waiting broker response (in seconds). \n   example: client.connect(\"token\", \"Device\", \"Device:mqtt\", 5); \n\n![](https://sofia2-devops.westeurope.cloudapp.azure.com/gitlab/sofia2-projects/sofia2-s4c/raw/develop/client-libraries/java/exampleConnect.png \"Example Connect\")\n\n#### **Publish**\n\n- You can publish messages through method \"publish()\", arguments needed: ontology identification name, ontology instance as string (must be json format!), and timeout in seconds.\n\n![](https://sofia2-devops.westeurope.cloudapp.azure.com/gitlab/sofia2-projects/sofia2-s4c/raw/develop/client-libraries/java/examplePub.png \"Example Publish\")\n\n#### **Subscribe**\n\n- You can subscribe to an ontology through method \"subscribe()\", by specifying the Query (filter), the ontology identification, the type of query (Native or SQL), timeout in seconds for waiting subscription ACK response, and lastly, a handler/listener is needed for handling incoming messages from the subscription. \n\n- By calling this method you get a String with the subscriptionId, needed to unsubscribe.\n\n![](https://sofia2-devops.westeurope.cloudapp.azure.com/gitlab/sofia2-projects/sofia2-s4c/raw/develop/client-libraries/java/exampleSubs.png \"Example Subscribe\")\n\n#### Subscribe\n\n- You can unsubscribe with method \"unsubscribe()\", with the subscriptionId obtained before.\n\n#### Disconnect\n\n- To terminate the connection, call method \"disconnect()\".\n\n## Using executable example provided (.jar)\n\nA jar is provided to test this client. You can use it by executing \"java -jar java-client.jar\" with arguments \"brokerURI\", and optional \"key store path\" and \"password\" .\n\n![](https://sofia2-devops.westeurope.cloudapp.azure.com/gitlab/sofia2-projects/sofia2-s4c/raw/develop/client-libraries/java/exampleExec.png \"Example\")",
	"installation":"Download the .jar file. You can use it by executing \"java -jar java-client.jar\" with arguments \"brokerURI\", and optional \"key store path\" and \"password\" .",
	"functionality":""
}